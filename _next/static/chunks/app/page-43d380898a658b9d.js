(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2978:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eA});var s=r(5155),a=r(2115),o=r(2355),n=r(3052),i=r(4107),l=r(2596),c=r(9688);function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,c.QP)((0,l.$)(t))}var m=r(9708),u=r(2085);let p=(0,u.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:n=!1,...i}=e,l=n?m.DX:"button";return(0,s.jsx)(l,{className:d(p({variant:a,size:o,className:r})),ref:t,...i})});function x(e){let{className:t,classNames:r,showOutsideDays:a=!0,...l}=e;return(0,s.jsx)(i.hv,{showOutsideDays:a,className:d("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:d(p({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:d(p({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{...t}=e;return(0,s.jsx)(o.A,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,s.jsx)(n.A,{className:"h-4 w-4"})}},...l})}h.displayName="Button",x.displayName="Calendar";var f=r(4616),j=r(9343),g=r(1788),N=r(9869),v=r(3470),y=r(4416);let b=v.bL;v.l9;let w=v.ZL;v.bm;let C=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(v.hJ,{ref:t,className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});C.displayName=v.hJ.displayName;let S=a.forwardRef((e,t)=>{let{className:r,children:a,...o}=e;return(0,s.jsxs)(w,{children:[(0,s.jsx)(C,{}),(0,s.jsxs)(v.UC,{ref:t,className:d("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[a,(0,s.jsxs)(v.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(y.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});S.displayName=v.UC.displayName;let k=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};k.displayName="DialogHeader";let D=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:d("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};D.displayName="DialogFooter";let O=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(v.hE,{ref:t,className:d("text-lg font-semibold leading-none tracking-tight",r),...a})});O.displayName=v.hE.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(v.VY,{ref:t,className:d("text-sm text-muted-foreground",r),...a})}).displayName=v.VY.displayName;let E=a.forwardRef((e,t)=>{let{className:r,type:a,...o}=e;return(0,s.jsx)("input",{type:a,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});E.displayName="Input";var T=r(968);let I=(0,u.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(T.b,{ref:t,className:d(I(),r),...a})});R.displayName=T.b.displayName;let _=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:d("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});function F(e){return e.toISOString().split("T")[0]}function A(e){let{open:t,onOpenChange:r,task:o,onSave:n,defaultDate:i}=e,[l,c]=(0,a.useState)(""),[d,m]=(0,a.useState)([]),[u,p]=(0,a.useState)({pcCode:"",pcName:"",projectCode:"",projectName:"",processCode:"",processName:"",processDetailCode:"",processDetailName:"",employeeCode:"",employeeName:"",workDate:F(new Date),hoursWorked:0,minutesWorked:0,regularOvertime:0,nightOvertime:0,holidayOvertime:0,holidayNightOvertime:0,amount:"0",workDescription:""});(0,a.useEffect)(()=>{let e=localStorage.getItem("projects");e&&m(JSON.parse(e))},[]),(0,a.useEffect)(()=>{if(o){p({...o,workDate:F(new Date(o.workDate))});let e=d.find(e=>e.projectCode===o.projectCode&&e.processCode===o.processCode);c((null==e?void 0:e.id)||"")}else p({pcCode:"",pcName:"",projectCode:"",projectName:"",processCode:"",processName:"",processDetailCode:"",processDetailName:"",employeeCode:"",employeeName:"",workDate:F(i||new Date),hoursWorked:0,minutesWorked:0,regularOvertime:0,nightOvertime:0,holidayOvertime:0,holidayNightOvertime:0,amount:"0",workDescription:""}),c("")},[o,i,t,d]);let x=e=>{let{name:t,value:r}=e.target;p(e=>({...e,[t]:r}))},f=e=>{let{name:t,value:r}=e.target;p(e=>({...e,[t]:Number(r)}))};return(0,s.jsx)(b,{open:t,onOpenChange:r,children:(0,s.jsxs)(S,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(k,{children:[(0,s.jsx)(O,{children:o?"タスクを編集":"新規タスク追加"}),(0,s.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,s.jsx)(R,{htmlFor:"projectId",children:"プロジェクト選択"}),(0,s.jsxs)("select",{id:"projectId",name:"projectId",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:l,onChange:e=>{let t=e.target.value;if(c(t),t){let e=d.find(e=>e.id===t);e&&p(t=>({...t,pcCode:e.pcCode,pcName:e.pcName,projectCode:e.projectCode,projectName:e.projectName,processCode:e.processCode,processName:e.processName,processDetailCode:e.processDetailCode,processDetailName:e.processDetailName}))}},required:!0,children:[(0,s.jsx)("option",{value:"",children:"プロジェクトを選択してください"}),d.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.projectName," - ",e.processName]},e.id))]})]})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=60*(u.hoursWorked||0)+(u.minutesWorked||0),r=Math.floor(t/60),s=t%60;n({id:(null==o?void 0:o.id)||Date.now().toString(),...u,timeDisplay:"".concat(r,":").concat(s.toString().padStart(2,"0")),minutesTotal:t})},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"pcCode",children:"PCコード"}),(0,s.jsx)(E,{id:"pcCode",name:"pcCode",value:u.pcCode,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"pcName",children:"PC名"}),(0,s.jsx)(E,{id:"pcName",name:"pcName",value:u.pcName,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"projectCode",children:"プロジェクトコード"}),(0,s.jsx)(E,{id:"projectCode",name:"projectCode",value:u.projectCode,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"projectName",children:"プロジェクト名"}),(0,s.jsx)(E,{id:"projectName",name:"projectName",value:u.projectName,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"processCode",children:"工程コード"}),(0,s.jsx)(E,{id:"processCode",name:"processCode",value:u.processCode,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"processName",children:"工程名"}),(0,s.jsx)(E,{id:"processName",name:"processName",value:u.processName,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"processDetailCode",children:"工程詳細コード"}),(0,s.jsx)(E,{id:"processDetailCode",name:"processDetailCode",value:u.processDetailCode,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"processDetailName",children:"工程詳細名"}),(0,s.jsx)(E,{id:"processDetailName",name:"processDetailName",value:u.processDetailName,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"employeeCode",children:"従業員コード"}),(0,s.jsx)(E,{id:"employeeCode",name:"employeeCode",value:u.employeeCode,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"employeeName",children:"従業員名"}),(0,s.jsx)(E,{id:"employeeName",name:"employeeName",value:u.employeeName,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"workDate",children:"作業日"}),(0,s.jsx)(E,{id:"workDate",name:"workDate",type:"date",value:u.workDate,onChange:x})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"hoursWorked",children:"実績時間 (時)"}),(0,s.jsx)(E,{id:"hoursWorked",name:"hoursWorked",type:"number",min:"0",value:u.hoursWorked,onChange:f})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"minutesWorked",children:"実績時間 (分)"}),(0,s.jsx)(E,{id:"minutesWorked",name:"minutesWorked",type:"number",min:"0",max:"59",value:u.minutesWorked,onChange:f})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"regularOvertime",children:"普通残業"}),(0,s.jsx)(E,{id:"regularOvertime",name:"regularOvertime",type:"number",min:"0",value:u.regularOvertime,onChange:f})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"nightOvertime",children:"普通深夜"}),(0,s.jsx)(E,{id:"nightOvertime",name:"nightOvertime",type:"number",min:"0",value:u.nightOvertime,onChange:f})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"holidayOvertime",children:"休日残業"}),(0,s.jsx)(E,{id:"holidayOvertime",name:"holidayOvertime",type:"number",min:"0",value:u.holidayOvertime,onChange:f})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"holidayNightOvertime",children:"休日深夜"}),(0,s.jsx)(E,{id:"holidayNightOvertime",name:"holidayNightOvertime",type:"number",min:"0",value:u.holidayNightOvertime,onChange:f})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"amount",children:"金額"}),(0,s.jsx)(E,{id:"amount",name:"amount",value:u.amount,onChange:x})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"workDescription",children:"作業内容"}),(0,s.jsx)(_,{id:"workDescription",name:"workDescription",rows:3,value:u.workDescription,onChange:x})]}),(0,s.jsxs)(D,{children:[(0,s.jsx)(h,{type:"button",variant:"outline",onClick:()=>r(!1),children:"キャンセル"}),(0,s.jsx)(h,{type:"submit",children:"保存"})]})]})]})})}_.displayName="Textarea";let P=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});P.displayName="Card";let W=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",r),...a})});W.displayName="CardHeader";let M=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",r),...a})});M.displayName="CardTitle";let z=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:d("text-sm text-muted-foreground",r),...a})});z.displayName="CardDescription";let V=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:d("p-6 pt-0",r),...a})});V.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter";var q=r(3717),U=r(2525);let J=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:d("w-full caption-bottom text-sm",r),...a})})});J.displayName="Table";let B=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:d("[&_tr]:border-b",r),...a})});B.displayName="TableHeader";let L=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:d("[&_tr:last-child]:border-0",r),...a})});L.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let K=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});K.displayName="TableRow";let Y=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:d("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});Y.displayName="TableHead";let H=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:d("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});function $(e){let{tasks:t,onEdit:r,onDelete:a}=e;return 0===t.length?(0,s.jsxs)(P,{children:[(0,s.jsx)(W,{children:(0,s.jsx)(M,{children:"タスク一覧"})}),(0,s.jsx)(V,{children:(0,s.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"この日付のタスクはありません。「新規タスク追加」ボタンからタスクを追加してください。"})})]}):(0,s.jsxs)(P,{children:[(0,s.jsx)(W,{children:(0,s.jsx)(M,{children:"タスク一覧"})}),(0,s.jsx)(V,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(J,{children:[(0,s.jsx)(B,{children:(0,s.jsxs)(K,{children:[(0,s.jsx)(Y,{children:"プロジェクト"}),(0,s.jsx)(Y,{children:"工程"}),(0,s.jsx)(Y,{children:"時間"}),(0,s.jsx)(Y,{children:"作業内容"}),(0,s.jsx)(Y,{className:"w-[100px]",children:"操作"})]})}),(0,s.jsx)(L,{children:t.map(e=>(0,s.jsxs)(K,{children:[(0,s.jsxs)(H,{children:[(0,s.jsx)("div",{className:"font-medium",children:e.projectName}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.projectCode})]}),(0,s.jsxs)(H,{children:[(0,s.jsx)("div",{children:e.processName}),e.processDetailName&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.processDetailName})]}),(0,s.jsxs)(H,{children:[e.hoursWorked,":",e.minutesWorked.toString().padStart(2,"0")]}),(0,s.jsx)(H,{className:"max-w-[200px] truncate",children:e.workDescription}),(0,s.jsx)(H,{children:(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsxs)(h,{variant:"ghost",size:"icon",onClick:()=>r(e),children:[(0,s.jsx)(q.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"編集"})]}),(0,s.jsxs)(h,{variant:"ghost",size:"icon",onClick:()=>a(e.id),children:[(0,s.jsx)(U.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"削除"})]})]})})]},e.id))})]})})})]})}function Q(e){let{date:t,tasks:r}=e,a=r.reduce((e,t)=>e+(60*(t.hoursWorked||0)+(t.minutesWorked||0)),0),o=Math.floor(a/60),n=new Set(r.map(e=>e.projectCode));return(0,s.jsxs)(P,{children:[(0,s.jsx)(W,{children:(0,s.jsxs)(M,{children:["".concat(t.getFullYear(),"年").concat(t.getMonth()+1,"月").concat(t.getDate(),"日")," の概要"]})}),(0,s.jsx)(V,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-primary/10 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"総作業時間"}),(0,s.jsxs)("div",{className:"text-2xl font-bold mt-1",children:[o,"時間 ",a%60,"分"]})]}),(0,s.jsxs)("div",{className:"bg-primary/10 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"タスク数"}),(0,s.jsx)("div",{className:"text-2xl font-bold mt-1",children:r.length})]}),(0,s.jsxs)("div",{className:"bg-primary/10 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"プロジェクト数"}),(0,s.jsx)("div",{className:"text-2xl font-bold mt-1",children:n.size})]})]})})]})}function X(e){let{open:t,onOpenChange:r,project:o,onSave:n}=e,[i,l]=(0,a.useState)({pcCode:"",pcName:"",projectCode:"",projectName:"",processCode:"",processName:"",processDetailCode:"",processDetailName:""});(0,a.useEffect)(()=>{o?l({...o}):l({pcCode:"",pcName:"",projectCode:"",projectName:"",processCode:"",processName:"",processDetailCode:"",processDetailName:""})},[o,t]);let c=e=>{let{name:t,value:r}=e.target;l(e=>({...e,[t]:r}))};return(0,s.jsx)(b,{open:t,onOpenChange:r,children:(0,s.jsxs)(S,{className:"max-w-md",children:[(0,s.jsx)(k,{children:(0,s.jsx)(O,{children:o?"プロジェクト編集":"プロジェクト登録"})}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n({id:(null==o?void 0:o.id)||Date.now().toString(),...i})},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"pcCode",children:"PCコード"}),(0,s.jsx)(E,{id:"pcCode",name:"pcCode",value:i.pcCode,onChange:c,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"pcName",children:"PC名"}),(0,s.jsx)(E,{id:"pcName",name:"pcName",value:i.pcName,onChange:c,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"projectCode",children:"プロジェクトコード"}),(0,s.jsx)(E,{id:"projectCode",name:"projectCode",value:i.projectCode,onChange:c,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"projectName",children:"プロジェクト名"}),(0,s.jsx)(E,{id:"projectName",name:"projectName",value:i.projectName,onChange:c,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"processCode",children:"工程コード"}),(0,s.jsx)(E,{id:"processCode",name:"processCode",value:i.processCode,onChange:c,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"processName",children:"工程名"}),(0,s.jsx)(E,{id:"processName",name:"processName",value:i.processName,onChange:c,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"processDetailCode",children:"工程詳細コード"}),(0,s.jsx)(E,{id:"processDetailCode",name:"processDetailCode",value:i.processDetailCode,onChange:c})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(R,{htmlFor:"processDetailName",children:"工程詳細名"}),(0,s.jsx)(E,{id:"processDetailName",name:"processDetailName",value:i.processDetailName,onChange:c})]})]}),(0,s.jsxs)(D,{children:[(0,s.jsx)(h,{type:"button",variant:"outline",onClick:()=>r(!1),children:"キャンセル"}),(0,s.jsx)(h,{type:"submit",children:"保存"})]})]})]})})}H.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:d("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption";var Z=r(4186),G=r(2178),ee=r(5690);function et(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60);return"".concat(t.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))}function er(){return new Date().toISOString().split("T")[0]}function es(e){let{projects:t,onEdit:r,onDelete:a,onStartTimer:o,onStopTimer:n,activeTimers:i,todaySessions:l}=e,c={};return(l.forEach(e=>{c[e.projectId]||(c[e.projectId]=0),c[e.projectId]+=e.duration}),0===t.length)?(0,s.jsxs)(P,{children:[(0,s.jsxs)(W,{children:[(0,s.jsx)(M,{children:"プロジェクト一覧"}),(0,s.jsx)(z,{children:"登録されたプロジェクトがありません"})]}),(0,s.jsx)(V,{children:(0,s.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"「プロジェクト登録」ボタンからプロジェクトを追加してください。"})})]}):(0,s.jsxs)(P,{children:[(0,s.jsxs)(W,{children:[(0,s.jsx)(M,{children:"プロジェクト一覧"}),(0,s.jsx)(z,{children:"登録済みプロジェクト"})]}),(0,s.jsx)(V,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(J,{children:[(0,s.jsx)(B,{children:(0,s.jsxs)(K,{children:[(0,s.jsx)(Y,{children:"プロジェクト"}),(0,s.jsx)(Y,{children:"工程"}),(0,s.jsx)(Y,{children:"本日の作業時間"}),(0,s.jsx)(Y,{className:"w-[180px]",children:"タイマー"}),(0,s.jsx)(Y,{className:"w-[100px]",children:"操作"})]})}),(0,s.jsx)(L,{children:t.map(e=>{let t=!!i[e.id],l=c[e.id]||0,d=t?l+i[e.id].duration:l;return(0,s.jsxs)(K,{children:[(0,s.jsxs)(H,{children:[(0,s.jsx)("div",{className:"font-medium",children:e.projectName}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.projectCode})]}),(0,s.jsxs)(H,{children:[(0,s.jsx)("div",{children:e.processName}),e.processDetailName&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.processDetailName})]}),(0,s.jsx)(H,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(Z.A,{className:"h-4 w-4 mr-1 text-muted-foreground"}),(0,s.jsx)("span",{children:et(d)})]})}),(0,s.jsx)(H,{children:t?(0,s.jsxs)(h,{variant:"destructive",size:"sm",className:"w-full",onClick:()=>n(e.id),children:[(0,s.jsx)(G.A,{className:"h-4 w-4 mr-1"}),"停止"]}):(0,s.jsxs)(h,{variant:"default",size:"sm",className:"w-full",onClick:()=>o(e.id),children:[(0,s.jsx)(ee.A,{className:"h-4 w-4 mr-1"}),"開始"]})}),(0,s.jsx)(H,{children:(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsxs)(h,{variant:"ghost",size:"icon",onClick:()=>r(e),children:[(0,s.jsx)(q.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"編集"})]}),(0,s.jsxs)(h,{variant:"ghost",size:"icon",onClick:()=>a(e.id),children:[(0,s.jsx)(U.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"削除"})]})]})})]},e.id)})})]})})})]})}function ea(e){let{activeTimers:t,projects:r,onStopTimer:a}=e,o=Object.keys(t);if(0===o.length)return null;let n=o.map(e=>{let s=r.find(t=>t.id===e);return{id:e,project:s,duration:t[e].duration}}).filter(e=>e.project);return(0,s.jsxs)(P,{className:"bg-primary/5 border-primary/20",children:[(0,s.jsx)(W,{className:"pb-2",children:(0,s.jsxs)(M,{className:"text-lg flex items-center",children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"}),"進行中の作業"]})}),(0,s.jsx)(V,{children:(0,s.jsx)("div",{className:"space-y-2",children:n.map(e=>{let{id:t,project:r,duration:o}=e;return r&&(0,s.jsxs)("div",{className:"flex items-center justify-between bg-background p-3 rounded-md",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium",children:r.projectName}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:r.processName})]}),(0,s.jsx)("div",{className:"font-mono text-lg mr-4",children:et(o)}),(0,s.jsxs)(h,{size:"sm",variant:"outline",onClick:()=>a(t),children:[(0,s.jsx)(G.A,{className:"h-4 w-4 mr-1"}),"停止"]})]},t)})})})]})}async function eo(e){return new Promise((t,r)=>{let s=new FileReader;s.onload=e=>{try{var s;let r=(null===(s=e.target)||void 0===s?void 0:s.result).split("\n").slice(1).filter(e=>""!==e.trim()).map((e,t)=>{let r=[],s="",a=!1;for(let t=0;t<e.length;t++){let o=e[t];'"'===o?a=!a:","!==o||a?s+=o:(r.push(s),s="")}r.push(s);let o=0,n=0;if(r[11]&&r[11].includes(":")){let[e,t]=r[11].split(":");o=Number.parseInt(e,10)||0,n=Number.parseInt(t,10)||0}let i=e=>e.replace(/^"|"$/g,"");return{id:Date.now().toString()+t,pcCode:r[0]||"",pcName:i(r[1]||""),projectCode:r[2]||"",projectName:i(r[3]||""),processCode:r[4]||"",processName:i(r[5]||""),processDetailCode:r[6]||"",processDetailName:i(r[7]||""),employeeCode:r[8]||"",employeeName:i(r[9]||""),workDate:r[10]||"",hoursWorked:o,minutesWorked:n,minutesTotal:Number.parseInt(r[12],10)||0,timeDisplay:r[11]||"",regularOvertime:Number.parseInt(r[13],10)||0,nightOvertime:Number.parseInt(r[14],10)||0,holidayOvertime:Number.parseInt(r[15],10)||0,holidayNightOvertime:Number.parseInt(r[16],10)||0,amount:i(r[17]||"0"),workDescription:i(r[18]||"")}});t(r)}catch(e){r(e)}},s.onerror=()=>{r(Error("Failed to read file"))},s.readAsText(e)})}var en=r(6049);let ei=en.bL,el=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(en.B8,{ref:t,className:d("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});el.displayName=en.B8.displayName;let ec=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(en.l9,{ref:t,className:d("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});ec.displayName=en.l9.displayName;let ed=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(en.UC,{ref:t,className:d("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});async function em(){return"Notification"in window&&"granted"===await Notification.requestPermission()}ed.displayName=en.UC.displayName;let eu={PROJECTS:"projects",TASKS:"tasks",TIMER_SESSIONS:"timerSessions",ACTIVE_TIMERS:"activeTimers",USER_INFO:"userInfo"};function ep(){return new Promise((e,t)=>{let r=indexedDB.open("task-tracker-db",1);r.onerror=()=>{t(Error("Failed to open database"))},r.onsuccess=t=>{e(t.target.result)},r.onupgradeneeded=e=>{let t=e.target.result;if(t.objectStoreNames.contains(eu.PROJECTS)||t.createObjectStore(eu.PROJECTS,{keyPath:"id"}).createIndex("projectCode","projectCode",{unique:!1}),t.objectStoreNames.contains(eu.TASKS)||t.createObjectStore(eu.TASKS,{keyPath:"id"}).createIndex("workDate","workDate",{unique:!1}),!t.objectStoreNames.contains(eu.TIMER_SESSIONS)){let e=t.createObjectStore(eu.TIMER_SESSIONS,{keyPath:"id"});e.createIndex("date","date",{unique:!1}),e.createIndex("projectId","projectId",{unique:!1})}t.objectStoreNames.contains(eu.ACTIVE_TIMERS)||t.createObjectStore(eu.ACTIVE_TIMERS,{keyPath:"projectId"}),t.objectStoreNames.contains(eu.USER_INFO)||t.createObjectStore(eu.USER_INFO,{keyPath:"id"})}})}async function eh(e,t){let r=await ep();return new Promise((s,a)=>{let o=r.transaction(e,"readwrite"),n=o.objectStore(e).put(t);n.onsuccess=()=>{s()},n.onerror=()=>{a(Error("Failed to save data to ".concat(e)))},o.oncomplete=()=>{r.close()}})}async function ex(e,t){let r=await ep();return new Promise((s,a)=>{let o=r.transaction(e,"readonly"),n=o.objectStore(e).get(t);n.onsuccess=()=>{s(n.result||null)},n.onerror=()=>{a(Error("Failed to get data from ".concat(e)))},o.oncomplete=()=>{r.close()}})}async function ef(e){let t=await ep();return new Promise((r,s)=>{let a=t.transaction(e,"readonly"),o=a.objectStore(e).getAll();o.onsuccess=()=>{r(o.result||[])},o.onerror=()=>{s(Error("Failed to get all data from ".concat(e)))},a.oncomplete=()=>{t.close()}})}async function ej(e,t){let r=await ep();return new Promise((s,a)=>{let o=r.transaction(e,"readwrite"),n=o.objectStore(e).delete(t);n.onsuccess=()=>{s()},n.onerror=()=>{a(Error("Failed to delete data from ".concat(e)))},o.oncomplete=()=>{r.close()}})}async function eg(e){return eh(eu.PROJECTS,e)}async function eN(){return ef(eu.PROJECTS)}async function ev(e){return ej(eu.PROJECTS,e)}async function ey(e){return eh(eu.TASKS,e)}async function eb(){return ef(eu.TASKS)}async function ew(e){return ej(eu.TASKS,e)}async function eC(e){return eh(eu.TIMER_SESSIONS,e)}async function eS(){return ef(eu.TIMER_SESSIONS)}async function ek(e){return eh(eu.ACTIVE_TIMERS,e)}async function eD(){return ef(eu.ACTIVE_TIMERS)}async function eO(e){return ej(eu.ACTIVE_TIMERS,e)}async function eE(e){return eh(eu.USER_INFO,{...e,id:"current"})}async function eT(){return ex(eu.USER_INFO,"current")}let eI=null;async function eR(e){let t=Date.now();await ek({projectId:e,startTime:t,lastUpdated:t}),eI&&eI.postMessage({type:"TIMER_STARTED",projectId:e,startTime:t})}async function e_(e,t,r){let s=(await eD()).find(t=>t.projectId===e);if(!s)return null;let a=Date.now(),o=Math.floor((a-s.startTime)/1e3),n={id:a.toString(),projectId:e,startTime:s.startTime,endTime:a,duration:o,date:er()};await eC(n),await eO(e);let i=function(e,t,r,s){let a=e.duration,o=Math.floor(a/3600),n=Math.floor(a%3600/60);return{id:e.id,pcCode:t.pcCode,pcName:t.pcName,projectCode:t.projectCode,projectName:t.projectName,processCode:t.processCode,processName:t.processName,processDetailCode:t.processDetailCode,processDetailName:t.processDetailName,employeeCode:r,employeeName:s,workDate:e.date,hoursWorked:o,minutesWorked:n,regularOvertime:0,nightOvertime:0,holidayOvertime:0,holidayNightOvertime:0,amount:"0",workDescription:"タイマー記録: ".concat(et(a)),timeDisplay:"".concat(o,":").concat(n.toString().padStart(2,"0")),minutesTotal:60*o+n}}(n,t,r.employeeCode,r.employeeName);return await ey(i),eI&&eI.postMessage({type:"TIMER_STOPPED",projectId:e}),{session:n,task:i}}function eF(e){return Math.floor((Date.now()-e)/1e3)}function eA(){let[e,t]=(0,a.useState)(new Date),[r,o]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[l,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),[v,y]=(0,a.useState)(null),[b,w]=(0,a.useState)("tasks"),[C,S]=(0,a.useState)(!0),[k,D]=(0,a.useState)({}),[O,E]=(0,a.useState)([]),T=(0,a.useRef)(null),I=(0,a.useRef)(null),[R,_]=(0,a.useState)({employeeCode:"224117",employeeName:"田中　太郎"});(0,a.useEffect)(()=>((async()=>{S(!0);try{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})}),await em(),eI||"undefined"==typeof BroadcastChannel||(eI=new BroadcastChannel("timer-channel")),I.current=eI,await F(),I.current&&(I.current.onmessage=W),P()}catch(e){console.error("Error initializing app:",e)}finally{S(!1)}})(),()=>{T.current&&clearInterval(T.current),I.current&&I.current.close()}),[]);let F=async()=>{try{let e=await eN();i(e);let t=await eb();o(t);let r=await eS();E(r);let s=await eD(),a={};s.forEach(e=>{a[e.projectId]={startTime:e.startTime,duration:eF(e.startTime)}}),D(a);let n=await eT();n?_(n):await eE(R)}catch(e){console.error("Error loading data:",e)}},P=()=>{T.current&&clearInterval(T.current),T.current=setInterval(()=>{D(e=>{let t={...e},r=!1;return Object.keys(t).forEach(e=>{t[e]={...t[e],duration:eF(t[e].startTime)},r=!0}),!r&&T.current&&(clearInterval(T.current),T.current=null),t})},1e3)},W=e=>{let{type:t,projectId:r,startTime:s}=e.data;"TIMER_STARTED"===t&&r?(D(e=>({...e,[r]:{startTime:s,duration:eF(s)}})),P()):"TIMER_STOPPED"===t&&r&&(D(e=>{let t={...e};return delete t[r],t}),F())},M=async e=>{try{await ey(e),u?o(t=>t.map(t=>t.id===e.id?e:t)):o(t=>[...t,e]),c(!1)}catch(e){console.error("Error saving task:",e),alert("タスクの保存中にエラーが発生しました。")}},z=async e=>{try{await ew(e),o(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting task:",e),alert("タスクの削除中にエラーが発生しました。")}},V=async e=>{try{await eg(e),v?i(t=>t.map(t=>t.id===e.id?e:t)):i(t=>[...t,e]),m(!1)}catch(e){console.error("Error saving project:",e),alert("プロジェクトの保存中にエラーが発生しました。")}},q=async e=>{if(k[e]){alert("このプロジェクトは現在タイマー実行中です。先にタイマーを停止してください。");return}try{await ev(e),i(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting project:",e),alert("プロジェクトの削除中にエラーが発生しました。")}},U=async e=>{try{await eR(e);let t=Date.now();D(r=>({...r,[e]:{startTime:t,duration:0}})),P()}catch(e){console.error("Error starting timer:",e),alert("タイマーの開始中にエラーが発生しました。")}},J=async e=>{try{let t=n.find(t=>t.id===e);if(!t)throw Error("Project not found");let r=await e_(e,t,R);if(r){let{session:t,task:s}=r;E(e=>[...e,t]),o(e=>[...e,s]),D(t=>{let r={...t};return delete r[e],r})}}catch(e){console.error("Error stopping timer:",e),alert("タイマーの停止中にエラーが発生しました。")}},B=async e=>{if(e.target.files&&e.target.files[0])try{let t=e.target.files[0],r=await eo(t);for(let e of r)await ey(e);o(e=>[...e,...r])}catch(e){console.error("Error importing CSV:",e),alert("CSVのインポート中にエラーが発生しました。")}},L=r.filter(t=>{if(!e)return!1;let r=new Date(t.workDate);return r.getFullYear()===e.getFullYear()&&r.getMonth()===e.getMonth()&&r.getDate()===e.getDate()}),K=r.map(e=>new Date(e.workDate)),Y=er(),H=O.filter(e=>e.date===Y);return C?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-lg",children:"読み込み中..."})]})}):(0,s.jsxs)("div",{className:"container mx-auto p-4 max-w-7xl",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,s.jsxs)("div",{className:"w-full md:w-1/3 space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"作業カレンダー"}),(0,s.jsx)(x,{mode:"single",selected:e,onSelect:e=>{t(e)},className:"rounded-md border",modifiers:{booked:K},modifiersStyles:{booked:{fontWeight:"bold",backgroundColor:"hsl(var(--primary) / 0.1)",color:"hsl(var(--primary))"}}})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"データ管理"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)(h,{onClick:()=>{p(null),c(!0)},className:"w-full",children:[(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"新規タスク追加"]}),(0,s.jsxs)(h,{onClick:()=>{y(null),m(!0)},className:"w-full",variant:"secondary",children:[(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"プロジェクト登録"]}),(0,s.jsxs)(h,{onClick:()=>{!function(e){let t=new Blob([["PCコード,PC名,プロジェクトコード,プロジェクト名,工程コード,工程名,工程詳細コード,工程詳細名,従業員コード,従業員名,作業日,実績時間（h）,実績時間（m）,普通残業,普通深夜,休日残業,休日深夜,金額,作業内容",...e.map(e=>[e.pcCode,'"'.concat(e.pcName,'"'),e.projectCode,'"'.concat(e.projectName,'"'),e.processCode,'"'.concat(e.processName,'"'),e.processDetailCode,'"'.concat(e.processDetailName,'"'),e.employeeCode,'"'.concat(e.employeeName,'"'),e.workDate,"".concat(e.hoursWorked,":").concat(e.minutesWorked.toString().padStart(2,"0")),60*e.hoursWorked+e.minutesWorked,e.regularOvertime,e.nightOvertime,e.holidayOvertime,e.holidayNightOvertime,'"'.concat(e.amount,'"'),'"'.concat(e.workDescription,'"')].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(t),s=document.createElement("a");s.setAttribute("href",r),s.setAttribute("download","tasks_export_".concat(new Date().toISOString().slice(0,10),".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}(r)},variant:"outline",className:"w-full",children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"CSVエクスポート"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"file",accept:".csv",id:"csv-upload",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:B}),(0,s.jsxs)(h,{variant:"outline",className:"w-full",children:[(0,s.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"CSVインポート"]})]})]})]})]}),(0,s.jsxs)("div",{className:"w-full md:w-2/3 space-y-4",children:[Object.keys(k).length>0&&(0,s.jsx)(ea,{activeTimers:k,projects:n,onStopTimer:J}),(0,s.jsxs)(ei,{value:b,onValueChange:w,children:[(0,s.jsxs)(el,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(ec,{value:"tasks",children:"タスク"}),(0,s.jsx)(ec,{value:"projects",children:"プロジェクト"})]}),(0,s.jsx)(ed,{value:"tasks",className:"space-y-4",children:e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q,{date:e,tasks:L}),(0,s.jsx)($,{tasks:L,onEdit:e=>{p(e),c(!0)},onDelete:z})]})}),(0,s.jsx)(ed,{value:"projects",className:"space-y-4",children:(0,s.jsx)(es,{projects:n,onEdit:e=>{y(e),m(!0)},onDelete:q,onStartTimer:U,onStopTimer:J,activeTimers:k,todaySessions:H})})]})]})]}),(0,s.jsx)(A,{open:l,onOpenChange:c,task:u,onSave:M,defaultDate:e}),(0,s.jsx)(X,{open:d,onOpenChange:m,project:v,onSave:V})]})}},8661:(e,t,r)=>{Promise.resolve().then(r.bind(r,2978))}},e=>{var t=t=>e(e.s=t);e.O(0,[528,441,684,358],()=>t(8661)),_N_E=e.O()}]);